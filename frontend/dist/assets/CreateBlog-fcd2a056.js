import{S as x,s as m,c as v,n as d,p as b,d as j,r as h,e as f,f as y,j as t}from"./index-72c9a98f.js";class g extends x{constructor(e,i){super(),this.client=e,this.setOptions(i),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var i;const s=this.options;this.options=this.client.defaultMutationOptions(e),m(s,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(i=this.currentMutation)==null||i.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.currentMutation)==null||e.removeObserver(this)}}onMutationUpdate(e){this.updateResult();const i={listeners:!0};e.type==="success"?i.onSuccess=!0:e.type==="error"&&(i.onError=!0),this.notify(i)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,i){return this.mutateOptions=i,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof e<"u"?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:v(),i={...e,isLoading:e.status==="loading",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=i}notify(e){d.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(e.onSuccess){var i,s,n,r;(i=(s=this.mutateOptions).onSuccess)==null||i.call(s,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(n=(r=this.mutateOptions).onSettled)==null||n.call(r,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(e.onError){var u,c,l,o;(u=(c=this.mutateOptions).onError)==null||u.call(c,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(l=(o=this.mutateOptions).onSettled)==null||l.call(o,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}e.listeners&&this.listeners.forEach(({listener:p})=>{p(this.currentResult)})})}}function R(a,e,i){const s=b(a,e,i),n=j({context:s.context}),[r]=h.useState(()=>new g(n,s));h.useEffect(()=>{r.setOptions(s)},[r,s]);const u=f(h.useCallback(l=>r.subscribe(d.batchCalls(l)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),c=h.useCallback((l,o)=>{r.mutate(l,o).catch(M)},[r]);if(u.error&&y(r.options.useErrorBoundary,[u.error]))throw u.error;return{...u,mutate:c,mutateAsync:u.mutate}}function M(){}const S=()=>{const a="https://sanooj.dev/backend/api/create-blogs";return R({mutationFn:e=>fetch(a,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})})},O=()=>{const a=S(),e=i=>{i.preventDefault();const s=i.target,n=[];s.react.checked&&n.push(s.react.value),s.js.checked&&n.push(s.js.value),s.css.checked&&n.push(s.css.value),s.html.checked&&n.push(s.html.value),a.mutate({title:s.title.value,image:s.image.value,imageDescription:s.imageDescription.value,summary:s.summary.value,content:s.content.value,categories:n})};return t.jsxs("div",{children:[t.jsx("h1",{children:"Create Blog"}),t.jsxs("form",{onSubmit:e,children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"title",children:"Title"}),t.jsx("input",{type:"text",id:"title"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"image",children:"Image"}),t.jsx("input",{type:"text",id:"image"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"imageDescription",children:"Image Description"}),t.jsx("input",{type:"text",id:"imageDescription"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"summary",children:"Summary"}),t.jsx("input",{type:"text",id:"summary"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"content",children:"Content"}),t.jsx("textarea",{id:"content"})]}),t.jsxs("div",{children:[t.jsx("label",{children:"Categories"}),t.jsxs("div",{children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"react",children:"React"}),t.jsx("input",{type:"checkbox",id:"react",value:"React"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"js",children:"Javascript"}),t.jsx("input",{type:"checkbox",id:"js",value:"Javascript"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"css",children:"CSS"}),t.jsx("input",{type:"checkbox",id:"css",value:"CSS"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"html",children:"HTML"}),t.jsx("input",{type:"checkbox",id:"html",value:"HTML"})]})]})]}),t.jsx("button",{type:"submit",children:"Submit"})]})]})};export{O as default};
